文章来自[https://www.anthropic.com/engineering/writing-tools-for-agents](https://www.anthropic.com/engineering/writing-tools-for-agents)

由Anthropic公司发布，主要介绍了如何为AI代理（agents）编写高效工具，并通过Claude等AI agent优化这些工具。以下是文章的主要观点：
### 1\. 工具的重要性

- **工具定义**：工具是确定性系统（如传统软件）和非确定性agent（如AI agent）之间的契约。传统软件在相同输入下总是产生相同输出，而AI agent可能产生不同的响应。
- **工具的作用**：工具使AI agent能够解决现实世界中的任务。工具的有效性直接影响AI agent的表现。

### 2\. 编写工具的方法

- **原型开发**：快速搭建工具原型并进行本地测试。如果使用Claude Code编写工具，提供相关软件库、API或SDK的文档。
- **测试工具**：亲自测试工具，收集用户反馈，了解工具的使用场景和提示。
- **运行评估**：通过评估任务来衡量Claude使用工具的效果。评估任务应基于现实世界的使用场景，避免过于简单或表面化的环境。

### 3\. 评估工具

- **生成评估任务**：使用Claude Code快速生成大量评估任务，任务应基于现实世界的使用场景和数据源。
- **运行评估**：通过直接调用LLM API运行评估，使用简单的agent循环（while-loop）来处理每个评估任务。
- **分析结果**：观察agent在何处遇到困难或困惑，分析工具调用的指标，如运行时间、调用次数、token消耗和工具错误。

### 4\. 与agent协作

- **agent分析结果**：将评估agent的记录合并后输入Claude Code，让Claude分析记录并优化工具。
- **优化工具**：通过迭代优化内部工具实现，使用Claude Code进行优化。

### 5\. 编写有效工具的原则

- **选择合适的工具**：不要简单地将现有软件功能或API端点包装成工具，而是要根据agent的特点和需求选择工具。
- **命名空间工具**：通过命名空间（如按服务或资源分组）来明确工具的功能边界，减少agent的混淆。
- **返回有意义的上下文**：工具应返回高信号信息，避免低级技术标识符，使用自然语言标识符。
- **优化工具响应**：通过分页、范围选择、过滤和截断等方法优化工具响应，减少token消耗。
- **提示工程工具描述**：明确工具描述和规范，避免模糊性，清晰描述输入和输出。

### 6\. 未来展望

- **非确定性软件开发**：需要从传统的确定性软件开发模式转向非确定性模式。
- **工具与agent的共同进化**：随着agent能力的提升，工具也将不断进化。

